/*! touchjs v0.2.14  2014-08-05 */
"use strict";!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(b):a.touch=b()}(this,function(){var a={};a.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},a.hasTouch="ontouchstart"in window,a.getType=function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},a.getSelector=function(a){return a.id?"#"+a.id:a.className?"."+a.className.split(/\s+/).join("."):a===document?"body":a.tagName.toLowerCase()},a.matchSelector=function(a,b){return a.webkitMatchesSelector(b)},a.getEventListeners=function(a){return a.listeners},a.getPCevts=function(a){return this.PCevts[a]||a},a.forceReflow=function(){var a=document.getElementById("reflowDivBlock");a||(a=document.createElement("div"),a.id="reflowDivBlock",document.body.appendChild(a));var b=a.parentNode,c=a.nextSibling;b.removeChild(a),b.insertBefore(a,c)},a.simpleClone=function(a){return Object.create(a)},a.getPosOfEvent=function(a){if(this.hasTouch){for(var b=[],c=null,d=0,e=a.touches.length;d<e;d++)c=a.touches[d],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]},a.getDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},a.getFingers=function(a){return a.touches?a.touches.length:1},a.calScale=function(a,b){if(a.length>=2&&b.length>=2){var c=this.getDistance(a[1],a[0]);return this.getDistance(b[1],b[0])/c}return 1},a.getAngle=function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},a.getAngle180=function(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return c<0?c+180:c},a.getDirectionFromAngle=function(a){var b={up:a<-45&&a>-135,down:a>=45&&a<135,left:a>=135||a<=-135,right:a>=-45&&a<=45};for(var c in b)if(b[c])return c;return null},a.getXYByElement=function(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}},a.reset=function(){g=h=i=null,p=n=j=k=!1,l=!1,e={},s=!1},a.isTouchMove=function(a){return"touchmove"===a.type||"mousemove"===a.type},a.isTouchEnd=function(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type},a.env=function(){var a={},b=navigator.userAgent,c=b.match(/(Android)[\s\/]+([\d\.]+)/),d=b.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),e=b.match(/(Windows\s+Phone)\s([\d\.]+)/),f=/WebKit\/[\d.]+/i.test(b),g=!!d&&(navigator.standalone?f:/Safari/i.test(b)&&!/CriOS/i.test(b)&&!/MQQBrowser/i.test(b));return c&&(a.android=!0,a.version=c[2]),d&&(a.ios=!0,a.version=d[2].replace(/_/g,"."),a.ios7=/^7/.test(a.version),"iPad"===d[1]?a.ipad=!0:"iPhone"===d[1]?(a.iphone=!0,a.iphone5=568==screen.height):"iPod"===d[1]&&(a.ipod=!0)),e&&(a.wp=!0,a.version=e[2],a.wp8=/^8/.test(a.version)),f&&(a.webkit=!0),g&&(a.safari=!0),a}();var b={proxyid:0,proxies:[],trigger:function(a,b,c){c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};try{"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))}catch(a){console.warn("Touch.js is not supported by environment.")}},bind:function(b,c,d){b.listeners=b.listeners||{},b.listeners[c]?b.listeners[c].push(d):b.listeners[c]=[d];var e=function(b){a.env.ios7&&a.forceReflow(),b.originEvent=b;for(var c in b.detail)"type"!==c&&(b[c]=b.detail[c]);b.startRotate=function(){s=!0};var e=d.call(b.target,b);void 0===e||e||(b.stopPropagation(),b.preventDefault())};d.proxy=d.proxy||{},d.proxy[c]?d.proxy[c].push(this.proxyid++):d.proxy[c]=[this.proxyid++],this.proxies.push(e),b.addEventListener&&b.addEventListener(c,e,!1)},unbind:function(a,b,c){if(c){var d=c.proxy[b];d&&d.length&&d.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else{var e=a.listeners[b];e&&e.length&&e.forEach(function(c){a.removeEventListener(b,c,!1)})}},delegate:function(b,c,d,e){var f=function(c){var f,g;c.originEvent=c;for(var h in c.detail)"type"!==h&&(c[h]=c.detail[h]);c.startRotate=function(){s=!0};var i=a.getSelector(b)+" "+d,j=a.matchSelector(c.target,i),k=a.matchSelector(c.target,i+" "+c.target.nodeName);if(!j&&k){for(a.env.ios7&&a.forceReflow(),f=c.target;!a.matchSelector(f,i);)f=f.parentNode;void 0===(g=e.call(c.target,c))||g||(c.stopPropagation(),c.preventDefault())}else a.env.ios7&&a.forceReflow(),(j||k)&&(void 0===(g=e.call(c.target,c))||g||(c.stopPropagation(),c.preventDefault()))};e.proxy=e.proxy||{},e.proxy[c]?e.proxy[c].push(this.proxyid++):e.proxy[c]=[this.proxyid++],this.proxies.push(f),b.listeners=b.listeners||{},b.listeners[c]?b.listeners[c].push(f):b.listeners[c]=[f],b.addEventListener&&b.addEventListener(c,f,!1)},undelegate:function(a,b,c,d){if(d){var e=d.proxy[b];e.length&&e.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else a.listeners[b].forEach(function(c){a.removeEventListener(b,c,!1)})}},c={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},d={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},e={start:null,move:null,end:null},f=0,g=null,h=null,i=null,j=!1,k=!1,l=!1,m={},n=!1,o=null,p=!1,q=null,r=1,s=!1,t=[],u=0,v=0,w=0,x=null,y={getAngleDiff:function(b){for(var c=parseInt(u-a.getAngle180(b[0],b[1]),10),d=0;Math.abs(c-v)>90&&d++<50;)v<0?c-=180:c+=180;return v=parseInt(c,10)},pinch:function(f){var g=f.target;if(c.pinch){if(!n)return;if(a.getFingers(f)<2&&!a.isTouchEnd(f))return;var h=a.calScale(e.start,e.move),i=this.getAngleDiff(e.move),j={type:"",originEvent:f,scale:h,rotation:i,direction:i>0?"right":"left",fingersCount:a.getFingers(f)};if(k?a.isTouchMove(f)?(j.fingerStatus="move",b.trigger(g,d.PINCH,j)):a.isTouchEnd(f)&&(j.fingerStatus="end",b.trigger(g,d.PINCH_END,j),a.reset()):(k=!0,j.fingerStatus="start",b.trigger(g,d.PINCH_START,j)),Math.abs(1-h)>c.minScaleRate){var l=a.simpleClone(j);h>r?(r=h-1e-11,b.trigger(g,d.PINCH_OUT,l,!1)):h<r&&(r=h+1e-11,b.trigger(g,d.PINCH_IN,l,!1)),a.isTouchEnd(f)&&(r=1)}if(Math.abs(i)>c.minRotationAngle){var m,o=a.simpleClone(j);m=i>0?d.ROTATION_RIGHT:d.ROTATION_LEFT,b.trigger(g,m,o,!1),b.trigger(g,d.ROTATION,j)}}},rotateSingleFinger:function(c){var f=c.target;if(s&&a.getFingers(c)<2){if(!e.move)return;if(t.length<2){var g=a.getXYByElement(f);t=[{x:g.left+f.offsetWidth/2,y:g.top+f.offsetHeight/2},e.move[0]],u=parseInt(a.getAngle180(t[0],t[1]),10)}var h=[t[0],e.move[0]],i=this.getAngleDiff(h),j={type:"",originEvent:c,rotation:i,direction:i>0?"right":"left",fingersCount:a.getFingers(c)};a.isTouchMove(c)?j.fingerStatus="move":(a.isTouchEnd(c)||"mouseout"===c.type)&&(j.fingerStatus="end",b.trigger(f,d.PINCH_END,j),a.reset());var k=i>0?d.ROTATION_RIGHT:d.ROTATION_LEFT;b.trigger(f,k,j),b.trigger(f,d.ROTATION,j)}},swipe:function(g){var h=g.target;if(n&&e.move&&!(a.getFingers(g)>1)){var i=Date.now(),k=i-f,o=a.getDistance(e.start[0],e.move[0]),p={x:e.move[0].x-m.left,y:e.move[0].y-m.top},q=a.getAngle(e.start[0],e.move[0]),r=a.getDirectionFromAngle(q),s=k/1e3,t=10*(10-c.swipeFactor)*s*s,u={type:d.SWIPE,originEvent:g,position:p,direction:r,distance:o,distanceX:e.move[0].x-e.start[0].x,distanceY:e.move[0].y-e.start[0].y,x:e.move[0].x-e.start[0].x,y:e.move[0].y-e.start[0].y,angle:q,duration:k,fingersCount:a.getFingers(g),factor:t};if(c.swipe){var v=function(){var a=d;switch(r){case"up":b.trigger(h,a.SWIPE_UP,u);break;case"down":b.trigger(h,a.SWIPE_DOWN,u);break;case"left":b.trigger(h,a.SWIPE_LEFT,u);break;case"right":b.trigger(h,a.SWIPE_RIGHT,u)}};j?a.isTouchMove(g)?(u.fingerStatus=u.swipe="move",b.trigger(h,d.SWIPING,u),k>c.swipeTime&&k<c.swipeTime+50&&o>c.swipeMinDistance&&(v(),b.trigger(h,d.SWIPE,u,!1))):(a.isTouchEnd(g)||"mouseout"===g.type)&&(u.fingerStatus=u.swipe="end",b.trigger(h,d.SWIPE_END,u),c.swipeTime>k&&o>c.swipeMinDistance&&(v(),b.trigger(h,d.SWIPE,u,!1))):(u.fingerStatus=u.swipe="start",j=!0,b.trigger(h,d.SWIPE_START,u))}c.drag&&(l?a.isTouchMove(g)?(u.fingerStatus=u.swipe="move",b.trigger(h,d.DRAG,u)):a.isTouchEnd(g)&&(u.fingerStatus=u.swipe="end",b.trigger(h,d.DRAGEND,u)):(u.fingerStatus=u.swipe="start",l=!0,b.trigger(h,d.DRAGSTART,u)))}},tap:function(g){var h=g.target;if(c.tap){var i=Date.now(),j=i-f,k=a.getDistance(e.start[0],e.move?e.move[0]:e.start[0]);if(clearTimeout(o),function(){return!!(x&&c.doubleTap&&f-w<c.maxDoubleTapInterval&&a.getDistance(x,e.start[0])<16)}())return clearTimeout(q),void b.trigger(h,d.DOUBLE_TAP,{type:d.DOUBLE_TAP,originEvent:g,position:e.start[0]});if(c.tapMaxDistance<k)return;c.holdTime>j&&a.getFingers(g)<=1&&(p=!0,w=i,x=e.start[0],q=setTimeout(function(){b.trigger(h,d.TAP,{type:d.TAP,originEvent:g,fingersCount:a.getFingers(g),position:x})},c.tapTime))}},hold:function(d){var f=d.target;c.hold&&(clearTimeout(o),o=setTimeout(function(){if(e.start){var g=a.getDistance(e.start[0],e.move?e.move[0]:e.start[0]);c.tapMaxDistance<g||p||b.trigger(f,"hold",{type:"hold",originEvent:d,fingersCount:a.getFingers(d),position:e.start[0]})}},c.holdTime))}},z=function(b){var c=b.target;switch(b.type){case"touchstart":case"mousedown":t=[],n=!0,(!e.start||e.start.length<2)&&(e.start=a.getPosOfEvent(b)),a.getFingers(b)>=2&&(u=parseInt(a.getAngle180(e.start[0],e.start[1]),10)),f=Date.now(),g=b,m={};var d=c.getBoundingClientRect(),h=document.documentElement;m={top:d.top+(window.pageYOffset||h.scrollTop)-(h.clientTop||0),left:d.left+(window.pageXOffset||h.scrollLeft)-(h.clientLeft||0)},y.hold(b);break;case"touchmove":case"mousemove":if(!n||!e.start)return;e.move=a.getPosOfEvent(b),a.getFingers(b)>=2?y.pinch(b):s?y.rotateSingleFinger(b):y.swipe(b);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!n)return;i=b,k?y.pinch(b):s?y.rotateSingleFinger(b):j?y.swipe(b):y.tap(b),a.reset(),u=0,v=0,b.touches&&1===b.touches.length&&(n=!0,s=!0)}},A=function(){var c,d,e,f,g=arguments;if(g.length<2||g>4)return console.error("unexpected arguments!");var h="string"===a.getType(g[0])?document.querySelectorAll(g[0]):g[0];if(h=h.length?Array.prototype.slice.call(h):[h],3===g.length&&"string"===a.getType(g[1]))return c=g[1].split(" "),d=g[2],void c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),h.forEach(function(a){b.bind(a,c,d)})});if(3!==g.length||"object"!==a.getType(g[1]))if(2!==g.length||"object"!==a.getType(g[1])){if(4===g.length&&"object"===a.getType(g[2]))return c=g[1].split(" "),d=g[3],void c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),h.forEach(function(a){b.bind(a,c,d)})});if(4===g.length){var i=h[0];return c=g[1].split(" "),f=g[2],d=g[3],void c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),b.delegate(i,c,f,d)})}}else{e=g[1];for(var j in e)!function(c){a.hasTouch||(c=a.getPCevts(c)),h.forEach(function(a){b.bind(a,c,e[c])})}(j)}else{e=g[1],f=g[2];for(var k in e)!function(c){a.hasTouch||(c=a.getPCevts(c)),h.forEach(function(a){b.delegate(a,c,f,e[c])})}(k)}},B=function(){var c,d,e=arguments;if(e.length<1||e.length>4)return console.error("unexpected arguments!");var f="string"===a.getType(e[0])?document.querySelectorAll(e[0]):e[0];if(f=f.length?Array.prototype.slice.call(f):[f],1===e.length||2===e.length)return void f.forEach(function(d){c=e[1]?e[1].split(" "):Object.keys(d.listeners),c.length&&c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),b.unbind(d,c),b.undelegate(d,c)})});if(3===e.length&&"function"===a.getType(e[2]))return d=e[2],void f.forEach(function(f){c=e[1].split(" "),c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),b.unbind(f,c,d)})});if(3===e.length&&"string"===a.getType(e[2])){var g=e[2];return void f.forEach(function(d){c=e[1].split(" "),c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),b.undelegate(d,c,g)})})}return 4===e.length?(d=e[3],void f.forEach(function(f){c=e[1].split(" "),c.forEach(function(c){a.hasTouch||(c=a.getPCevts(c)),b.undelegate(f,c,g,d)})})):void 0},C=function(c,d,e){var f=arguments;a.hasTouch||(d=a.getPCevts(d));var g="string"===a.getType(f[0])?document.querySelectorAll(f[0]):f[0];g=g.length?Array.prototype.call(g):[g],g.forEach(function(a){b.trigger(a,d,e)})};!function(){(a.hasTouch?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout").split(" ").forEach(function(a){document.addEventListener(a,z,!1)})}();var D={};return D.on=D.bind=D.live=A,D.off=D.unbind=D.die=B,D.config=c,D.trigger=C,D});